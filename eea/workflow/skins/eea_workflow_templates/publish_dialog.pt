<form method="POST" action="" tal:attributes="action string:${context/absolute_url}/content_status_modify"
  tal:define="portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
  questions_template python:'%s_publish_questions' % portal_type;
  questions python:path('context/%s | context/default_publish_questions' % questions_template)">

  <tal:ver tal:define="versions nocall:context/@@getVersions; has_newer versions/newest" tal:omit-tag="">

    <div tal:define="readiness_view nocall:context/@@get_readiness | nothing" tal:condition="not:has_newer">
      <div tal:condition="python:(not readiness_view) or readiness_view.is_ready_for('published')" tal:omit-tag="">

        <div tal:replace="structure questions" />

        <div style="padding-top:20px;" tal:define="wEmails context/@@workflowEmails|nothing; 
          transition_id string:publish;
          emails wEmails/?transition_id|nothing">
          <dl class="collapsible inline collapsedInlineCollapsible" id="notice_emails">
            <dt class="collapsibleHeader" style="background-color:White; color:#2D749C; font-size:1.2em;">
              The following people will be notified by email...
            </dt>
            <dd class="collapsibleContent">
              Action emails: <span class="discreet" tal:content="emails/action|string:none or old way">emails</span><br />				     
              Confirmatiion emails: <span class="discreet" tal:content="emails/confirmation|string:none or old way">emails</span><br />				     
            </dd>
          </dl>
        </div>

      </div>
      <p tal:condition="python:readiness_view and not readiness_view.is_ready_for('published')" >
        This item is not yet ready to be published!
      </p>
    </div>

    <div tal:condition="has_newer" tal:omit-tag="">
      <p>
        This item has already been published in a later version. You need to contact the 
        <a href="mailto:admin" 
          tal:define="portal python:context.portal_url.getPortalObject(); 
          email_address python:portal.getProperty('email_from_address'); 
          email_from python:portal.getProperty('email_from_name')" 
          tal:attributes="href string:mailto:$email_address" tal:content="email_from">admin</a> 
        to solve this issue.
      </p>
    </div>

  </tal:ver>

  <input name="workflow_action" type="hidden" value="publish" /> <!-- gets overwritten by javascript -->
  <textarea name="comment" id="comment" style="display:none"></textarea>

</form>
